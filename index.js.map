{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\"\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst API=\"52799161-b762ef396431272d847d94f09\";\nconst BASE_URL=\"https://pixabay.com/api/\";\n\nexport async function getImagesByQuery(query, page=1){\n   try{\n       const response= await axios.get(BASE_URL,{\n        params:{\n            key:API,\n            q:query,\n            image_type: \"photo\",\n            orientation:\"horizontal\",\n            safesearch:true,\n            page:page,\n            per_page:16\n        }\n    });\n    return response;\n   }catch(error){\n    throw error;\n   }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery=document.querySelector(\".gallery\");\nconst loader=document.querySelector(\".loader\");\nconst loadMore=document.querySelector(\".loadMore\");\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n  captionPosition: 'bottom',\n});\n\nexport function createGallery(images){\n     const markup = images.map((image) => {\n    return `\n      <li>\n        <a href=\"${image.largeImageURL}\" >\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n        </a>\n        <div class=\"image-info\">\n  <div class=\"stat\">\n    <span>Likes</span>\n    <strong>${image.likes}</strong>\n  </div>\n  <div class=\"stat\">\n    <span>Comments</span>\n    <strong>${image.comments}</strong>\n  </div>\n  <div class=\"stat\">\n    <span>Views</span>\n    <strong>${image.views}</strong>\n  </div>\n  <div class=\"stat\">\n    <span>Downloads</span>\n    <strong>${image.downloads}</strong>\n  </div>\n</div>\n    </li>\n    `;\n  }).join(\"\");\n    gallery.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n};\n\nexport function clearGallery(){\n    gallery.innerHTML=\"\";\n};\n\nexport function showLoader(){\n    loader.classList.add(\"is-visible\");\n};\n\nexport function hideLoader(){\n    loader.classList.remove(\"is-visible\");\n};\n\nexport function showLoadMoreButton(){\n   loadMore.classList.add(\"is-visible\");\n};\n\nexport function hideLoadMoreButton(){\n   loadMore.classList.remove(\"is-visible\");\n};\n\n","import { getImagesByQuery } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton\n} from './js/render-functions.js';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst form=document.querySelector(\".form\");\nconst loadMoreBtn = document.querySelector(\".loadMore\");\n\nlet query = '';\nlet page = 1;\nconst perPage = 16;\nlet totalHits = 0;\n\nform.addEventListener(\"submit\", async function(event){\nevent.preventDefault();\nconst inputValue = event.target.elements[\"search-text\"].value.trim();\n  if (inputValue === '') {\n    hideLoader();\n     iziToast.error({\n      title: 'Error',\n      message: \"You entered an empty string\",\n      position: \"topRight\",\n      timeout: 3000,\n    });\n    return form.reset();\n  }\n  query = inputValue;\n  page = 1;\n  clearGallery();\n  showLoader();\n  hideLoadMoreButton();\n\ntry{\n   const response= await getImagesByQuery(query, page);\n   const images=response.data.hits;\n   totalHits = response.data.totalHits;\n\n   if (images.length === 0) {\n      throw new Error(\"NO RESULTS\");\n    }\n    createGallery(images);\n      if (page * perPage >= totalHits) {\n      hideLoadMoreButton();\n      iziToast.info({\n        title: \"Info\",\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: \"topRight\",\n        timeout: 3000,\n      });\n    }else{\n      showLoadMoreButton();\n    }\n}catch(error){\n if (error.message === \"NO RESULTS\") {\n        iziToast.error({\n          title: \"No Results\",\n          message: \"Sorry, there are no images matching your search query. Please try again!\",\n          position: \"topRight\",\n          timeout: 3000,\n        });\n      } else {\n        iziToast.error({\n          title: \"Error\",\n          message: \"An unexpected error occurred. Please try again later.\",\n          position: \"topRight\",\n          timeout: 3000,\n        });\n      }\n    }\nfinally{\n    hideLoader();\n    form.reset();\n}\n\n});\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n  page += 1;\n  showLoader();\n\n  try {\n    const response = await getImagesByQuery(query, page);\n    const images = response.data.hits;\n\n    createGallery(images);\n    const firstCard = document.querySelector('.gallery li');\n    if (firstCard) {\n      const cardHeight = firstCard.getBoundingClientRect().height;\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n\n    if (page * perPage >= totalHits) {\n      hideLoadMoreButton();\n      iziToast.info({\n        title: \"Info\",\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: \"topRight\",\n        timeout: 3000,\n      });\n    }\n\n  } catch (error) {\n    iziToast.error({\n      title: \"Error\",\n      message: \"Failed to load more images.\",\n      position: \"topRight\",\n      timeout: 3000,\n    });\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["API","BASE_URL","getImagesByQuery","query","page","axios","error","gallery","loader","loadMore","lightbox","SimpleLightbox","createGallery","images","markup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","loadMoreBtn","perPage","totalHits","event","inputValue","iziToast","response","firstCard","cardHeight"],"mappings":"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"}